{"version":3,"file":"highlightjs.js","sources":["../../__gen_lib/components/highlight-js.directive.ts","../../__gen_lib/ngx-highlight-js.module.ts"],"sourcesContent":["import {\n  Directive,\n  ElementRef,\n  Input,\n  OnInit,\n  OnDestroy,\n  ContentChild,\n  AfterViewInit,\n  Inject,\n} from '@angular/core';\nimport { DOCUMENT } from '@angular/common';\nimport { NgModel } from '@angular/forms';\n\ndeclare const hljs: any;\n\n@Directive({\n  selector: '[highlight-js]',\n  host: {\n    style: 'display:none;',\n  },\n})\nexport class HighlightJsDirective implements OnInit, AfterViewInit, OnDestroy {\n  @Input()\n  options: any;\n  @Input()\n  lang: string;\n  @Input()\n  code: string;\n  @ContentChild(NgModel)\n  private readonly ngModel: NgModel;\n\n  protected codeEl: any;\n  protected parentEl: any;\n\n  private escapeHTML(str: string): string {\n    return (str || '')\n      .replace(/&/g, '&amp;')\n      .replace(/</g, '&lt;')\n      .replace(/>/g, '&gt;')\n      .replace(/\"/g, '&quot;')\n      .replace(/'/g, '&apos;');\n  }\n\n  private init() {\n    this.destroy();\n    this.codeEl = this.doc.createElement('pre');\n    if (this.lang) {\n      this.codeEl.className = this.lang;\n    }\n    this.codeEl.innerHTML =\n      this.code || '' + this.el.nativeElement.innerHTML.trim();\n    this.parentEl = this.el.nativeElement.parentNode;\n    this.parentEl.insertBefore(this.codeEl, this.el.nativeElement.nextSibling);\n\n    hljs.configure(Object.assign({}, this.options));\n    hljs.highlightBlock(this.codeEl);\n  }\n\n  private destroy() {\n    if (this.codeEl) {\n      this.parentEl.removeChild(this.codeEl);\n      this.codeEl = null;\n    }\n  }\n\n  constructor(private el: ElementRef, @Inject(DOCUMENT) private doc: any) {}\n\n  ngOnInit() {\n    this.init();\n  }\n\n  ngAfterViewInit(): void {\n    if (this.ngModel) {\n      this.ngModel.valueChanges.subscribe(res => {\n        this.code = this.escapeHTML(res);\n        this.init();\n      });\n    } else {\n      this.initMutation();\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.destroy();\n    this.destroyMutation();\n  }\n\n  // #region Mutation\n\n  private observer: MutationObserver;\n  private initMutation() {\n    if (typeof MutationObserver === 'undefined') return;\n    this.observer = new MutationObserver(this.init.bind(this));\n    this.observer.observe(this.el.nativeElement, {\n      characterData: true,\n      childList: true,\n      subtree: true,\n    });\n  }\n\n  private destroyMutation() {\n    if (!this.observer) return;\n    this.observer.disconnect();\n  }\n\n  // #endregionn\n}\n","import { NgModule } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { HighlightJsDirective } from './components/highlight-js.directive';\r\n\r\n@NgModule({\r\n  imports: [FormsModule],\r\n  declarations: [HighlightJsDirective],\r\n  exports: [HighlightJsDirective]\r\n})\r\nexport class HighlightJsModule {\r\n}\r\n"],"names":[],"mappings":"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"}