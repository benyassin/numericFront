{"version":3,"file":"highlightjs.umd.min.js","sources":["../../__gen_lib/components/highlight-js.directive.ts","../../__gen_lib/ngx-highlight-js.module.ts"],"sourcesContent":["import {\n  Directive,\n  ElementRef,\n  Input,\n  OnInit,\n  OnDestroy,\n  ContentChild,\n  AfterViewInit,\n  Inject,\n} from '@angular/core';\nimport { DOCUMENT } from '@angular/common';\nimport { NgModel } from '@angular/forms';\n\ndeclare const hljs: any;\n\n@Directive({\n  selector: '[highlight-js]',\n  host: {\n    style: 'display:none;',\n  },\n})\nexport class HighlightJsDirective implements OnInit, AfterViewInit, OnDestroy {\n  @Input()\n  options: any;\n  @Input()\n  lang: string;\n  @Input()\n  code: string;\n  @ContentChild(NgModel)\n  private readonly ngModel: NgModel;\n\n  protected codeEl: any;\n  protected parentEl: any;\n\n  private escapeHTML(str: string): string {\n    return (str || '')\n      .replace(/&/g, '&amp;')\n      .replace(/</g, '&lt;')\n      .replace(/>/g, '&gt;')\n      .replace(/\"/g, '&quot;')\n      .replace(/'/g, '&apos;');\n  }\n\n  private init() {\n    this.destroy();\n    this.codeEl = this.doc.createElement('pre');\n    if (this.lang) {\n      this.codeEl.className = this.lang;\n    }\n    this.codeEl.innerHTML =\n      this.code || '' + this.el.nativeElement.innerHTML.trim();\n    this.parentEl = this.el.nativeElement.parentNode;\n    this.parentEl.insertBefore(this.codeEl, this.el.nativeElement.nextSibling);\n\n    hljs.configure(Object.assign({}, this.options));\n    hljs.highlightBlock(this.codeEl);\n  }\n\n  private destroy() {\n    if (this.codeEl) {\n      this.parentEl.removeChild(this.codeEl);\n      this.codeEl = null;\n    }\n  }\n\n  constructor(private el: ElementRef, @Inject(DOCUMENT) private doc: any) {}\n\n  ngOnInit() {\n    this.init();\n  }\n\n  ngAfterViewInit(): void {\n    if (this.ngModel) {\n      this.ngModel.valueChanges.subscribe(res => {\n        this.code = this.escapeHTML(res);\n        this.init();\n      });\n    } else {\n      this.initMutation();\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.destroy();\n    this.destroyMutation();\n  }\n\n  // #region Mutation\n\n  private observer: MutationObserver;\n  private initMutation() {\n    if (typeof MutationObserver === 'undefined') return;\n    this.observer = new MutationObserver(this.init.bind(this));\n    this.observer.observe(this.el.nativeElement, {\n      characterData: true,\n      childList: true,\n      subtree: true,\n    });\n  }\n\n  private destroyMutation() {\n    if (!this.observer) return;\n    this.observer.disconnect();\n  }\n\n  // #endregionn\n}\n","import { NgModule } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { HighlightJsDirective } from './components/highlight-js.directive';\r\n\r\n@NgModule({\r\n  imports: [FormsModule],\r\n  declarations: [HighlightJsDirective],\r\n  exports: [HighlightJsDirective]\r\n})\r\nexport class HighlightJsModule {\r\n}\r\n"],"names":["el","doc","this","HighlightJsDirective","str","replace","destroy","codeEl","createElement","lang","className","innerHTML","code","nativeElement","trim","parentEl","parentNode","insertBefore","nextSibling","hljs","configure","Object","assign","options","highlightBlock","removeChild","init","ngModel","valueChanges","subscribe","res","_this","escapeHTML","initMutation","destroyMutation","MutationObserver","observer","bind","observe","characterData","childList","subtree","disconnect","Directive","selector","host","style","ElementRef","Inject","DOCUMENT","Input","ContentChild","NgModel","NgModule","imports","FormsModule","declarations","exports"],"mappings":"yWAAA,iBAiEE,WAAoBA,EAA0CC,GAA1CC,QAAAF,EAA0CE,SAAAD,SA/BtDE,gCAAWC,GACjB,OAAQA,GAAO,IACZC,QAAQ,KAAM,SACdA,QAAQ,KAAM,QACdA,QAAQ,KAAM,QACdA,QAAQ,KAAM,UACdA,QAAQ,KAAM,WAGXF,4BACND,KAAKI,UACLJ,KAAKK,OAASL,KAAKD,IAAIO,cAAc,OACjCN,KAAKO,OACPP,KAAKK,OAAOG,UAAYR,KAAKO,MAE/BP,KAAKK,OAAOI,UACVT,KAAKU,MAAQ,GAAKV,KAAKF,GAAGa,cAAcF,UAAUG,OACpDZ,KAAKa,SAAWb,KAAKF,GAAGa,cAAcG,WACtCd,KAAKa,SAASE,aAAaf,KAAKK,OAAQL,KAAKF,GAAGa,cAAcK,aAE9DC,KAAKC,UAAUC,OAAOC,OAAO,GAAIpB,KAAKqB,UACtCJ,KAAKK,eAAetB,KAAKK,SAGnBJ,+BACFD,KAAKK,SACPL,KAAKa,SAASU,YAAYvB,KAAKK,QAC/BL,KAAKK,OAAS,OAMlBJ,qBAAA,WACED,KAAKwB,QAGPvB,4BAAA,WAAA,WACMD,KAAKyB,QACPzB,KAAKyB,QAAQC,aAAaC,UAAU,SAAAC,GAClCC,EAAKnB,KAAOmB,EAAKC,WAAWF,GAC5BC,EAAKL,SAGPxB,KAAK+B,gBAIT9B,wBAAA,WACED,KAAKI,UACLJ,KAAKgC,mBAMC/B,oCAC0B,oBAArBgC,mBACXjC,KAAKkC,SAAW,IAAID,iBAAiBjC,KAAKwB,KAAKW,KAAKnC,OACpDA,KAAKkC,SAASE,QAAQpC,KAAKF,GAAGa,cAAe,CAC3C0B,eAAe,EACfC,WAAW,EACXC,SAAS,MAILtC,uCACDD,KAAKkC,UACVlC,KAAKkC,SAASM,kCAvFjBC,kBAAU,CACTC,SAAU,iBACVC,KAAM,CACJC,MAAO,8DAhBTC,6CA+DqCC,eAAOC,kDA3C3CC,sBAEAA,sBAEAA,yBAEAC,qBAAaC,yECxBfC,iBAAS,CACRC,QAAS,CAACC,eACVC,aAAc,CAACrD,GACfsD,QAAS,CAACtD"}